# Feature Specification: 前端中文优先国际化

**Feature Branch**: `dev-mvp-20251218`  
**Created**: 2025-12-22  
**Status**: Draft  
**Input**: User description: "我要实现整个应用前端，默认中文，前端-全局保证默认中文，不要出现英文，支持设置切换英文，包含首页header头、拍照探索页、拍照识别进入的对话页面header头，我的收藏页面，学清报告页面、设置页面；"

**Note**: MVP版本阶段，所有开发工作统一在 `dev-mvp-20251218` 分支进行，不采用一个功能一个分支的策略。

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 首次访问应用看到全中文界面 (Priority: P1)

用户首次打开应用时，所有页面、组件和交互元素都默认显示中文，不出现任何英文文本。用户无需任何操作即可获得完整的中文体验。

**Why this priority**: 这是核心用户体验要求，确保中文用户获得最佳体验。根据项目规范，中文是主要语言，所有页面必须默认显示中文。

**Independent Test**: 可以独立测试：清除浏览器缓存和localStorage，打开应用，检查所有页面（首页、拍照页、对话页、收藏页、报告页、设置页）是否全部显示中文，没有任何英文文本。

**Acceptance Scenarios**:

1. **Given** 用户首次打开应用（无语言设置记录），**When** 访问首页，**Then** 首页header、按钮、提示文本全部显示中文
2. **Given** 用户首次打开应用，**When** 访问拍照探索页，**Then** 页面header、按钮、提示文本全部显示中文，不出现"AI Auto-Detect"等英文
3. **Given** 用户首次打开应用，**When** 拍照识别后进入对话页面，**Then** 对话页面header、消息提示、按钮全部显示中文，不出现"You found a new friend!"等英文
4. **Given** 用户首次打开应用，**When** 访问我的收藏页面，**Then** 页面标题、按钮、提示文本全部显示中文，不出现"My Favorites"、"Parent Mode"等英文
5. **Given** 用户首次打开应用，**When** 访问学习报告页面，**Then** 页面标题、统计标签、提示文本全部显示中文，不出现"Weekly Report"、"Exploration Stars"等英文
6. **Given** 用户首次打开应用，**When** 访问设置页面，**Then** 页面标题、设置项标签、年级选项全部显示中文

---

### User Story 2 - 在设置页面切换语言 (Priority: P2)

用户在设置页面可以通过语言切换器选择中文或英文，切换后立即生效，无需刷新页面。

**Why this priority**: 提供语言选择功能，满足不同用户的语言需求。虽然中文是主要语言，但需要支持英文切换以满足国际化需求。

**Independent Test**: 可以独立测试：打开设置页面，使用语言切换器从中文切换到英文，验证所有页面立即更新为英文；再切换回中文，验证所有页面立即更新为中文。

**Acceptance Scenarios**:

1. **Given** 用户当前使用中文界面，**When** 在设置页面点击"English"按钮，**Then** 所有页面立即切换为英文显示
2. **Given** 用户当前使用英文界面，**When** 在设置页面点击"中文"按钮，**Then** 所有页面立即切换为中文显示
3. **Given** 用户切换语言后，**When** 刷新页面或重新打开应用，**Then** 应用保持用户选择的语言设置
4. **Given** 用户切换语言后，**When** 导航到其他页面，**Then** 新页面也使用用户选择的语言显示

---

### User Story 3 - 所有页面支持中英文切换 (Priority: P3)

用户切换语言后，应用的所有页面（首页、拍照页、对话页、收藏页、报告页、设置页）都能正确显示对应语言的文本，包括header、按钮、提示、标签等所有UI元素。

**Why this priority**: 确保语言切换功能的完整性和一致性，用户在任何页面切换语言都能获得一致的体验。

**Independent Test**: 可以独立测试：在任意页面切换语言，验证当前页面和所有其他页面的文本都正确更新为对应语言，没有遗漏的硬编码文本。

**Acceptance Scenarios**:

1. **Given** 用户在首页，**When** 切换语言，**Then** 首页所有文本（包括header、按钮、卡片标题）立即更新为对应语言
2. **Given** 用户在拍照探索页，**When** 切换语言，**Then** 拍照页所有文本（包括header、按钮、提示）立即更新为对应语言
3. **Given** 用户在对话页面，**When** 切换语言，**Then** 对话页所有文本（包括header、消息提示、按钮）立即更新为对应语言
4. **Given** 用户在收藏页面，**When** 切换语言，**Then** 收藏页所有文本（包括标题、按钮、提示）立即更新为对应语言
5. **Given** 用户在报告页面，**When** 切换语言，**Then** 报告页所有文本（包括标题、统计标签、提示）立即更新为对应语言
6. **Given** 用户在设置页面，**When** 切换语言，**Then** 设置页所有文本（包括标题、设置项、年级标签）立即更新为对应语言

---

### Edge Cases

- 如果用户浏览器语言设置为英文，但应用仍应默认显示中文（除非用户明确选择英文）
- 如果localStorage被清除，应用应恢复为默认中文
- 如果i18n翻译文件缺失某个key，应显示fallback中文文本，而不是显示key名称
- 如果语言切换过程中页面正在加载，应确保切换后新加载的内容使用新语言
- 如果用户快速连续切换语言，应正确处理最后一次选择的语言

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统必须在应用首次启动时默认显示中文界面，不出现任何英文文本
- **FR-002**: 系统必须将所有硬编码的英文文本替换为i18n翻译key，包括但不限于：
  - Header组件中的"Little Explorer"、"My Favorites"等
  - 首页卡片标题"科学认知"、"人文素养"、"语言能力"等（应使用i18n）
  - 拍照页header中的"AI Auto-Detect"
  - 对话页面中的"You found a new friend!"、"It's a"、"AI Companion says:"等
  - 收藏页面中的"My Favorites"、"Keep exploring your collection of wonders!"、"Parent Mode"、"Clear All"等
  - 报告页面中的"Weekly Report"、"Hi, Little Explorer!"、"Exploration Stars"、"Total Favorites"等
  - 设置页面中的年级标签"Kindergarten 1"、"Grade 1"等
- **FR-003**: 系统必须支持用户在设置页面切换中英文，切换后立即生效，无需刷新页面
- **FR-004**: 系统必须确保语言设置持久化保存，用户刷新页面或重新打开应用后保持选择的语言
- **FR-005**: 系统必须在所有页面（首页、拍照页、对话页、收藏页、报告页、设置页）的header中正确显示对应语言的文本
- **FR-006**: 系统必须确保中文翻译文件完整，覆盖所有页面和组件的文本内容
- **FR-007**: 系统必须确保英文翻译文件完整，覆盖所有页面和组件的文本内容
- **FR-008**: 系统必须在语言切换失败或翻译缺失时，fallback到中文显示，而不是显示key名称或空白
- **FR-009**: 系统必须确保所有交互元素（按钮、链接、输入框placeholder等）都支持语言切换
- **FR-010**: 系统必须确保页面标题、提示消息、错误消息等所有用户可见文本都支持语言切换

### Key Entities *(include if feature involves data)*

- **语言设置 (Language Settings)**: 用户选择的语言偏好（中文或英文），存储在localStorage中，应用启动时读取并应用到所有页面
- **翻译资源 (Translation Resources)**: 包含中文和英文翻译的JSON对象，每个key对应一个UI文本，支持嵌套结构组织不同页面的翻译

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 100%的页面在首次访问时默认显示中文，无任何英文文本出现
- **SC-002**: 所有硬编码的英文文本被替换为i18n翻译key，代码审查中无硬编码英文文本
- **SC-003**: 用户在设置页面切换语言后，所有页面在1秒内完成语言切换，无需刷新页面
- **SC-004**: 语言设置持久化成功率100%，用户刷新页面后语言设置保持不变
- **SC-005**: 所有页面（首页、拍照页、对话页、收藏页、报告页、设置页）的header、按钮、提示文本都正确支持中英文切换
- **SC-006**: 中文翻译文件覆盖率达到100%，所有UI文本都有对应的中文翻译
- **SC-007**: 英文翻译文件覆盖率达到100%，所有UI文本都有对应的英文翻译
- **SC-008**: 语言切换功能测试通过率100%，所有测试场景都能正确切换语言
